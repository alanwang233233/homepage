<!doctype html>
<html lang="zh" class="no-js">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>通行密钥管理 - Vi</title>
  <meta name="color-scheme" content="dark light">
  <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
  <link rel="stylesheet" type="text/css" href="assets/css/main.css"/>
  <link rel="stylesheet" type="text/css" href="assets/css/auth.css"/>
</head>

<body>
  <div class="auth-container">
    <div class="auth-header">
      <a href="account.html" class="auth-logo">Vi</a>
    </div>

    <div class="auth-box wide-box">
      <div class="page-header">
        <h2 class="auth-title">通行密钥管理</h2>
        <button class="btn btn-primary btn-sm" id="addPasskeyBtn">添加通行密钥</button>
      </div>

      <p class="auth-description">
        通行密钥是一种更安全、更便捷的登录方式，无需密码即可访问您的账号。
      </p>

      <div class="passkey-list" id="passkeyList">
        <div class="passkey-item">
          <div class="passkey-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"/>
            </svg>
          </div>
          <div class="passkey-info">
            <div class="passkey-name">MacBook Pro</div>
            <div class="passkey-meta">
              <span>添加于 2024年12月1日</span>
              <span>•</span>
              <span>最后使用: 2天前</span>
            </div>
          </div>
          <div class="passkey-actions">
            <button class="btn-icon" title="重命名">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
              </svg>
            </button>
            <button class="btn-icon btn-danger" title="删除">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="3 6 5 6 21 6"/>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
              </svg>
            </button>
          </div>
        </div>

        <div class="passkey-item">
          <div class="passkey-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"/>
            </svg>
          </div>
          <div class="passkey-info">
            <div class="passkey-name">iPhone 15 Pro</div>
            <div class="passkey-meta">
              <span>添加于 2024年11月15日</span>
              <span>•</span>
              <span>最后使用: 1周前</span>
            </div>
          </div>
          <div class="passkey-actions">
            <button class="btn-icon" title="重命名">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
              </svg>
            </button>
            <button class="btn-icon btn-danger" title="删除">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="3 6 5 6 21 6"/>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
              </svg>
            </button>
          </div>
        </div>
      </div>

      <div class="auth-footer">
        <a href="account.html" class="link-text">返回账号中心</a>
      </div>
    </div>
  </div>

  <script src="assets/vendors/jquery-3.3.1.min.js"></script>
  <script>
    $(function() {
      $('#addPasskeyBtn').on('click', function() {
        alert('添加通行密钥功能待实现\n\n将调用 WebAuthn API 创建新的通行密钥');
      });

      $('.passkey-item .btn-icon:not(.btn-danger)').on('click', function() {
        var $item = $(this).closest('.passkey-item');
        var currentName = $item.find('.passkey-name').text();
        var newName = prompt('请输入新名称:', currentName);
        if (newName && newName !== currentName) {
          $item.find('.passkey-name').text(newName);
        }
      });

      $('.passkey-item .btn-danger').on('click', function() {
        var $item = $(this).closest('.passkey-item');
        var name = $item.find('.passkey-name').text();
        if (confirm('确定要删除通行密钥 "' + name + '" 吗？')) {
          $item.fadeOut(300, function() {
            $(this).remove();
          });
        }
      });
    });
  </script>
</body>
</html>
